# Calculating the average probability of ruin

We can use simulation to determine the likelihood the gambler has of loosing all his money when he repeatedly plays a game such as roulette.  As we have seen elsewhere it is straightforward to write programs to simulate the ammount of money the gambler has and that return the final outcome for the series of games played.  For instance, we can write a funtion that simulates a 1D random walk that stops once the walker enters state 0 or state n.  This function can also be made to return a 1 if the walker finishes in state 0 and a 0 if the walker finishes in state n.  As the return value for such a function is 0 or 1 what has been generated here is  a Bernoulli random variable.  The method via which this random variable is generated is more complicated than the typical method we have used for generating Bernoulli random variables but the return value is still a random variable that can only equal 0 or 1.  It is thus a Bernoulli random variable.

You know that a Bernoulli random variable has only one parameter `p`.  In this exercise we are thus going to learn how to estimate this parameter by performing a series of simulations of the walker.  To complete the exercise you will need to complete two functions:

1. `random_walker` - this function should take three arguments.  The first of these is `start`, which is the amount of money the gambler starts with. This should be a positive number.  The second argument is `n` and is the target amount of money that the gambler wants to win. The gambler should stop playing once he has `n` pounds or when he runs out of money and has zero pounds.  The final parameter is `p` the probability of winning each individual game the gambler plays. If the gambler wins a game the amount of money he has increases by one pound. If he looses the amount of money he has decreases by one pound.  Within the function the random 1D walk should be simulated until the walker arrives in state 0 or in state `n`. If the walk finishes with the walker arriving in state 0 the function should return 1. If the walk finishes with the walker arriving in state `n` the function should return 0.

2. `sample_mean` - this function should take four arguments.  `start`, `n` and `p` are as described above.  The final parameter `m` then tells you the number of times the function `random_walker` should be called.  Each time you call the `random_walker` function you generate a sample of the random variable of interest.  You can thus calculate a sample mean and a sample variance from all the the Bernoulli random variables you will have generated.  The sample mean you calculate in this way is an estiamte for the `p` parameter of the Bernoulli random variable.  As you have estimated this parameter by sampling you need to quote a confidence limit around your estimate using what you have learned about the variance of the sample mean from other exercises.  Your `sample_mean` function should therefore return three numbers.  `lower` is the lower extent of a 90% confidence limit on the estimate of the sample mean, `mean` is the value of the sample mean and `upper` is the upper extent for the 90% confidence limit.    
